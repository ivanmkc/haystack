{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal"
        },
        {
            "name": "Bootstrap",
            "type": "python",
            "request": "launch",
            "module": "bootstrap",
        },
        {
            "name": "Load documents from GSheets",
            "type": "python",
            "request": "launch",
            "module": "load_documents",
        },
        {
            "name": "Cloud Build: Build haystack",
            "request": "launch",
            "command": "gcloud builds submit --config=docker/cloud-build.yaml --timeout=3600",
            "type": "node-terminal",
        },
        {
            "name": "Cloud Run: Deploy haystack",
            "request": "launch",
            "command": "gcloud run deploy haystack --image=gcr.io/chatbot-299615/haystack --platform=managed --cpu=2 --memory=4G --port=8080 --region=us-central1 --update-env-vars ELASTICSEARCHDOCUMENTSTORE_PARAMS_HOST=${env:ELASTICSEARCHDOCUMENTSTORE_PARAMS_HOST},ELASTICSEARCHDOCUMENTSTORE_PARAMS_PORT=${env:ELASTICSEARCHDOCUMENTSTORE_PARAMS_PORT} --vpc-connector=${env:VPC_CONNECTOR}",
            "type": "node-terminal",
        },
        {
            "name": "Docker: Run haystack",
            "request": "launch",
            "command": "docker run -d -p 8080:8080 --env-file docker/.env.list gcr.io/chatbot-299615/haystack",
            "type": "node-terminal"
        },
        {
            "name": "Start local server (gunicorn)",
            "type": "python",
            "request": "launch",
            "module": "gunicorn",
            "args": [
                "rest_api.application:app",
                "-b",
                "0.0.0.0:4444",
                "-k",
                "uvicorn.workers.UvicornWorker",
                "-t",
                "300"
            ],
        },
    ]
}